# vim:ft=swayconfig
# @author nate zhou
# @since 2023,2024,2025,2026
# .config/sway/bindings

bindsym --release Caps_Lock exec "if [ $(cat /sys/class/leds/input*::capslock/brightness | head -1) = 0 ]; then notify-send -r 195 -t 1100 'CapsLock '; else notify-send -r 195 -t 1100 'CapsLock '; fi"

bindsym $mod+space exec fcitx5-remote -t && notify-send -u normal -r 3289 -t 1100 "$(fcitx5-remote -n)"

bindsym $mod+q kill
bindsym $mod+delete kill
bindsym $mod+d exec $menu
bindsym $mod+Return exec $term
bindsym $mod+Shift+Return exec $term -T "_Floating_Term"
bindsym $mod+r exec $term lf

bindsym $mod+Shift+r reload
bindsym $mod+Control+r exec swaymsg "output * bg ${HOME}/.local/share/wallpaper fill"
bindsym $mod+Shift+e exec ${HOME}/.local/bin/swayexit
bindsym $mod+Shift+q exec ${HOME}/.local/bin/swayhibe
# clipboard & bookmarks
bindsym $mod+c exec ${HOME}/.local/bin/wclip
bindsym $mod+b exec ${HOME}/.local/bin/wbookmark
bindsym $mod+Shift+b exec ${HOME}/.local/bin/wbookmark-record
# notification
bindsym $mod+Shift+n exec "dunstctl history-pop"
bindsym $mod+n exec "dunstctl close"
bindsym $mod+backspace exec "dunstctl close-all"
# swaylock is configured at ${HOME}/.config/swaylock/config
bindsym $mod+Shift+CONTROL+l exec "swaylock"
# adjust window gaps
bindsym $mod+CONTROL+minus exec "swaymsg gaps inner current minus 2"
bindsym $mod+CONTROL+equal exec "swaymsg gaps inner current plus 2"
# brightness
bindsym $mod+bracketleft exec brightnessctl set 2%- | awk -F'[()]' 'NR==3 {print $2}'| sed 's/%//' > $wobfifo  && pkill -SIGRTMIN+3 i3blocks
bindsym $mod+bracketright exec brightnessctl set 2%+ | awk -F'[()]' 'NR==3 {print $2}'| sed 's/%//' > $wobfifo && pkill -SIGRTMIN+3 i3blocks
# audio output
bindsym $mod+minus exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 2%- && wpctl get-volume @DEFAULT_AUDIO_SINK@ | sed 's/[^0-9]//g; s/^0//' > $wobfifo && pkill -SIGRTMIN+1 i3blocks
bindsym $mod+equal exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 2%+ && wpctl get-volume @DEFAULT_AUDIO_SINK@ | sed 's/[^0-9]//g; s/^0//' > $wobfifo && pkill -SIGRTMIN+1 i3blocks
bindsym $mod+m exec wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle && pkill -SIGRTMIN+1 i3blocks
# audio input
bindsym $mod+Shift+minus exec wpctl set-volume @DEFAULT_AUDIO_SOURCE@ 2%- &&  wpctl get-volume @DEFAULT_AUDIO_SOURCE@ | sed 's/[^0-9]//g; s/^0//' > $wobfifo && pkill -SIGRTMIN+2 i3blocks
bindsym $mod+Shift+equal exec wpctl set-volume @DEFAULT_AUDIO_SOURCE@ 2%+ &&  wpctl get-volume @DEFAULT_AUDIO_SOURCE@ | sed 's/[^0-9]//g; s/^0//' > $wobfifo && pkill -SIGRTMIN+2 i3blocks
bindsym $mod+Shift+m exec wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle && pkill -SIGRTMIN+2 i3blocks

bindsym $mod+CONTROL+space exec mpc toggle

## take a screenshot with a selected part
bindsym $mod+g exec ${HOME}/.local/bin/wshot
bindsym $mod+Shift+g exec ${HOME}/.local/bin/wshot-geo
## take a screenshot with all monitors
bindsym $mod+CONTROL+g exec grim && notify-send -u low -r 88 "Screenshot taken on all outputs"
## color picker
#bindsym $mod+CONTROL+c exec ${HOME}/.local/bin/wpicker
# seat cursor
#bindsym $mod+grave seat - cursor set 0 0
bindsym $mod+slash seat - cursor set 9999 9999
# wtype
#bindsym Control+e exec wtype -k 'Escape'


# managing windows
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

bindsym $mod+CONTROL+h mark swap, focus left, swap container with mark swap
bindsym $mod+CONTROL+j mark swap, focus down, swap container with mark swap
bindsym $mod+CONTROL+k mark swap, focus up, swap container with mark swap
bindsym $mod+CONTROL+l mark swap, focus right, swap container with mark swap

bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
# Strip workspace numbers for workspace 10, only display the name
# applys to any workspace that has a name of the form "[n][:][NAME]"
bindsym $mod+0 workspace 10:0

bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10:0

bindsym $mod+CONTROL+1 move container to workspace number 1; workspace number 1
bindsym $mod+CONTROL+2 move container to workspace number 2; workspace number 2
bindsym $mod+CONTROL+3 move container to workspace number 3; workspace number 3
bindsym $mod+CONTROL+4 move container to workspace number 4; workspace number 4
bindsym $mod+CONTROL+5 move container to workspace number 5; workspace number 5
bindsym $mod+CONTROL+6 move container to workspace number 6; workspace number 6
bindsym $mod+CONTROL+7 move container to workspace number 7; workspace number 7
bindsym $mod+CONTROL+8 move container to workspace number 8; workspace number 8
bindsym $mod+CONTROL+9 move container to workspace number 9; workspace number 9
bindsym $mod+CONTROL+0 move container to workspace number 10:0; workspace number 10:0

bindsym $mod+tab workspace back_and_forth
bindsym $mod+comma workspace prev_on_output
bindsym $mod+period workspace next_on_output
bindsym $mod+Shift+comma move container to workspace prev_on_output
bindsym $mod+Shift+period move container to workspace next_on_output

bindsym $mod+CONTROL+comma focus output left
bindsym $mod+CONTROL+period focus output right

bindsym $mod+x splitv
bindsym $mod+v splith

bindsym $mod+s layout toggle stacking split
bindsym $mod+t layout toggle tabbed split
bindsym $mod+e layout toggle split

bindsym $mod+Shift+f fullscreen
# mimic maximize
workspace_auto_back_and_forth yes
for_window [title="_placeholder_window1"] mark "_placeholder_window1" , border pixel 0
for_window [title="_placeholder_window2"] mark "_placeholder_window2" , border pixel 0
assign [title="_placeholder_window1"] workspace -
assign [title="_placeholder_window2"] workspace =
workspace - output DP-1
workspace = output eDP-1
# use i3blocks as a GUI crontab to execute swaymaxd
bindsym $mod+grave exec "${HOME}/.local/bin/swaymaxd"
bindsym $mod+f exec "${HOME}/.local/bin/swaymax"

bindsym $mod+Shift+space floating toggle
bindsym $mod+Shift+c move position center
bindsym $mod+Shift+t sticky toggle
bindsym $mod+z focus mode_toggle

bindsym $mod+p focus parent
bindsym $mod+Shift+p focus child

bindsym $mod+Shift+s move scratchpad
bindsym $mod+a scratchpad show

bindsym $mod+y resize shrink width 30px
bindsym $mod+u resize grow height 30px
bindsym $mod+i resize shrink height 30px
bindsym $mod+o resize grow width 30px

bindsym $mod+Shift+y resize shrink width 10px
bindsym $mod+Shift+u resize grow height 10px
bindsym $mod+Shift+i resize shrink height 10px
bindsym $mod+Shift+o resize grow width 10px

# mouse bindings
bindsym --whole-window --border $mod+button2 exec wtype -k "Return"
bindsym --whole-window --border $mod+button4 exec wtype -k "Left"
bindsym --whole-window --border $mod+button5 exec wtype -k "Right"
