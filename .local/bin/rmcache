#!/usr/bin/sh
# @author nate zhou
# @since 2025
# remove pacman's packages cache
# @depends pacman-contrib

NVIDIA_DEPS="egl-gbm,egl-wayland,egl-wayland2,egl-x11,eglexternalplatform"
NVIDIA="nvidia-utils,nvidia-open,nvidia-open-dkms,nvtop,${NVIDIA_DEPS}"

IGNORED_PKGS="intel-ucode,amd-ucode,${NVIDIA}"

set -x
removeUninstalled() {
    sudo paccache --verbose --remove --ignore "$IGNORED_PKGS" \
                  --uninstalled --keep 0
}

removeOldEnough() {
    sudo paccache --verbose --remove --keep 3
}

removeUninstalled
removeOldEnough

