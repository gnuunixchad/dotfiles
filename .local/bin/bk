#!/usr/bin/sh
# create a backup of the file
# @authoer natezhou
# @since 2023,2025


usage() {
cat << _EOF_
USAGE
        $(basename $0) [OPTION] FILE...
        Create backups and append a tilde for backup filename
OPTION
        -i,--in-place   Append a tilde to the filenames instead of
                        creating copys
_EOF_
}

backup() {

for file in $files; do
    $action -i "$file" "${file}~"
done
}

[ "$#" -eq 0 ] && usage

case "$1" in
    -i|--in-place)
        shift
        files="$@"
        action="mv"
        backup
        ;;
    * )
        files="$@"
        action="cp -r"
        backup
        ;;
esac
