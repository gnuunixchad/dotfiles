#!/usr/bin/sh
# @author nate zhou
# @since 2025
# reload - execute cronjobs after system resume

notify-send -r 55 "$(basename $0) ($(date +'%H:%M'))" "Running resume hooks"

cleanup() {
    kill -- -$$ # kill the whole process group in this script
    # man 1 kill:
    # > When an argument of the form '-n' is given, and it is
    # > meant to denote a process group, either a signal must be
    # > specified first, or the argument must be preceded by a '--'
    # > option, otherwise it will be taken as the signal to send.
}

trap cleanup INT TERM EXIT

${HOME}/.local/bin/updw >/dev/null 2>&1 &

${HOME}/.local/bin/checkupdates-cron >/dev/null 2>&1 --now &

${HOME}/.local/bin/newsboat-update-cron >/dev/null 2>&1 --now &

${HOME}/.local/bin/calcurse-num-cron >/dev/null 2>&1 --now &

${HOME}/.local/bin/mbs >/dev/null 2>&1 &

wait
