#!/usr/bin/sh
# @author nate zhou
# @since 2024,2025,2026
# select an image for sway's wallpaper with imv

LIST="${XDG_RUNTIME_DIR}/gallery.list"

notify-send -u low -r 438 "[Shift+w] to set wallpaper"



ls -t $(find $HOME/pic/ -type f ) \
    | grep -e "$HOME/pic/art/drawing" \
           -e "$HOME/pic/art/vincent_van_gogh" \
           -e "$HOME/pic/camera/views" \
           -e "$HOME/pic/earth" \
           -e "$HOME/pic/gloomy" \
           -e "$HOME/pic/living" \
           -e "$HOME/pic/photography" \
           -e "$HOME/pic/poetical" \
           -e "$HOME/pic/wallpapers" \
    | shuf \
    > "$LIST"

if [ "$XDG_SESSION_TYPE" = "wayland" ]; then
    swayimg --class='Floating_IMG' -g -F "$LIST" -o none
elif [ -n "$XAUTHORITY" ]; then
    cat "$LIST" | nsxiv -N "Floating_IMG"  -t -
fi
