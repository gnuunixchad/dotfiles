#!/usr/bin/sh
# exiland - exit wayland compositors
# @author nate zhou
# @sincd 2025,2026

compositor="${1##*-}"

menu_prompt="Exit ${compositor}? This will end your Wayland session."

choice="$(printf "no\nyes" | wmenu-color -p "$menu_prompt")"

[ "$#" -ne 1 ] && exit 1

end_session() {
    case "$1" in
        -river)
            killall river
            ;;
        -river-classic)
            riverctl exit
            ;;
        -dwl)
            killall dwl
            ;;
        -sway)
            swaymsg exit
            ;;
    esac
}

[ "$choice" = "yes" ] && end_session "$1"
