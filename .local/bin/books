#!/usr/bin/sh
# @author nate zhou
# @since 2024,2025
# open ebooks with zathura with wmenu

source $HOME/.local/bin/wmenu-color 2>/dev/null

SEARCH_PATH="$HOME/doc/ebook"

selected_file="$(\
    find "$SEARCH_PATH" -type f \
    | grep -e .epub$ -e .pdf$  \
    | wmenu-color -p "$(basename $0)" -i -l 6\
    )"

#if grep '.epub' "$selected_file"; then
#    if grep '-zh.epub' "$selected_file"; then
#        viewer="footclient ${HOME}/.local/bin/epr-zh"
#    else
#        viewer="footclient ${HOME}/.local/bin/epr"
#    fi
#else viewer="zathura"
#fi
viewer="zathura"

[ -n "$selected_file" ] && $viewer "$selected_file"
